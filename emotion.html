<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>24hæƒ…ç»ªä¾¿åˆ©åº—</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="emotion.css">
<script src="https://unpkg.com/vue@3.5.25/dist/vue.global.prod.js"></script>
</head>
<body>
  <div id="Store">
    <nav class="navigation">
      <img src="logo.jpg" >
      <h1>24hæƒ…ç»ªä¾¿åˆ©åº—</h1>
      <ul>
        <li><span @click="page='home'">ä¸»é¡µ</span></li>
        <li><span @click="page='diary'">å¿ƒæƒ…ä¾¿ç­¾</span></li>
        <li><span @click="page='mbti'">MBTIæµ‹è¯•</span></li>
        <li><span @click="page='horoscope'">æ˜Ÿåº§è§£æ</span></li>
        <li><span @click="page='treehole'">æ ‘æ´</span></li>
        <li><span @click="page='profile'">æˆ‘çš„ç©ºé—´</span></li>
      </ul>
    </nav>
    <transition name="fade" mode="out-in">
      <div :key="page" class="page-container">
        <!-- ä¸»é¡µ -->
        <div v-if="page==='home'" key="home" class="welcome">
          <!-- å¼¹å¹• -->
          <div class="all_words">
            <div v-for="(row,rowIdx) in rows" 
                 :key="rowIdx" class="words-row"   
                 :style="{ animationDelay: `${rowIdx * 1}s`, animationDuration: `${16 + rowIdx*2}s` }">
              <span v-for="(text,i) in row"
                    :key="i"
                    class="words">
                {{ text }}
              </span>
            </div>
          </div>
          <div class="Mood" :class="{ 'not-hovering': !isHovering }">
            <!-- ä¸»é¡µè·³è½¬å¡ç‰‡1 -->
            <div class="mood-Record1"   
                 @mouseenter="isHovering = true"
                 @mouseleave="isHovering = false"
                 @click="page='diary'">
              <h1 >å¿ƒæƒ…ä¾¿ç­¾</h1>
              <img src="record.jpg" id="pic1" alt="å¿ƒæƒ…ä¾¿ç­¾">
              <p>åœ¨è¿™é‡Œæ‚¨å¯ä»¥è®°å½•å½“å¤©çš„å¿ƒæƒ…ï¼Œå¹¶å†™ä¸‹å½“ä¸‹çš„æ„Ÿå—ï¼Œä»»ä½•å¾®å°çš„æƒ…ç»ªéƒ½å€¼å¾—è¢«è®°å½•ï¼Œè¿™äº›ç¬é—´éƒ½å°†ä¼šæˆä¸ºæ‚¨ä»¥åç¾å¥½çš„å›å¿†ï¼</p>
              <h3 style="color: rgb(165, 45, 45);position: relative;top: -15px;font-size: 18px;">ç”¨å®è¾¾çš„ä¸–ç•Œç¨€é‡Šç—›è‹¦ï¼Œç”¨å¾®å°äº‹æƒ…æ„ŸçŸ¥å¹¸ç¦</h3>
            </div>
            <!-- ä¸»é¡µè·³è½¬å¡ç‰‡2 -->
            <div class="mood-Record2"
                 @mouseenter="isHovering = true"
                 @mouseleave="isHovering = false"
                 @click="page='mbti'">
              <h1 style="position: relative;top: 8px;">MBTIæµ‹è¯•</h1>
              <img src="2.jpg" id="pic2" alt="MBTIæµ‹è¯•">
              <p>åœ¨è¿™é‡Œå¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£è‡ªå·±å’Œä»–äººçš„æ€§æ ¼ç‰¹å¾ã€ä»·å€¼è§‚ä»¥åŠè¡Œä¸ºä¹ æƒ¯ï¼›è¾…åŠ©æ¢ç´¢è¿›è¡ŒèŒä¸šè§„åˆ’ã€äººé™…äº¤å¾€ã€è‡ªæˆ‘æˆé•¿ç­‰ã€‚</p>
              <h3 style="color: rgb(165, 45, 45);position: relative;top: -26px;font-size: 16px;">ä¸æ˜¯ç»™è‡ªå·±è´´æ ‡ç­¾ï¼Œè€Œæ˜¯æ›´æ¸…æ¥šåœ°ç†è§£è‡ªå·±çš„è¡Œä¸º</h3>
            </div>
            <!-- ä¸»é¡µè·³è½¬å¡ç‰‡3-->
            <div class="mood-Record3"
                 @mouseenter="isHovering = true"
                 @mouseleave="isHovering = false"
                 @click="page='horoscope'">    
              <h1 style="position: relative;top: 9px;">æ˜Ÿåº§è§£æ</h1>
              <img src="3.jpg" id="pic3" alt="æ˜Ÿåº§è§£æ">
              <p>åœ¨è¿™é‡Œä¼šä¸ºæ‚¨å±•ç¤ºæ¯ç§æ˜Ÿåº§å¯¹åº”çš„å¤§è‡´æ€§æ ¼ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å½“æ—¥æ‚¨çš„æ˜Ÿåº§è¿åŠ¿</p>
              <h3 style="color: rgb(165, 45, 45);position: relative;top: -7px;">ä¸è¦è¿‡åº¦æ²‰è¿·æ˜Ÿåº§åˆ†æï¼Œæœªæ¥æ˜¯æˆ‘ä»¬è‡ªå·±çš„</h3>
            </div>
            <!-- ä¸»é¡µè·³è½¬å¡ç‰‡4 -->
            <div class="mood-Record4"
                 @mouseenter="isHovering = true"
                 @mouseleave="isHovering = false"
                 @click="page='treehole'">
              <h1 style="position: relative;top: 9px;">æ ‘æ´</h1>
              <img src="4.jpg" id="pic4" alt="æ ‘æ´">
              <p>å½“æ‚¨éœ€è¦æ‰¾äººå€¾è¯‰æ—¶ï¼Œè¿™é‡Œä¼šä¸ºæ‚¨æä¾›åŒ¿åå¹³å°ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„MBTIä»¥åŠæ˜Ÿåº§ä¸ºæ‚¨åŒ¹é…é‚£ä¸ªèƒ½æ‡‚ä½ çš„äºº</p>
              <h3 style="color: rgb(165, 45, 45);position: relative;top: -20px;">æœ‰äº›æƒ…ç»ªæ˜¯è¯¥è¯´ç»™æ‡‚å¾—äººå¬</h3>
            </div>
            <!-- ä¸»é¡µè·³è½¬å¡ç‰‡5 -->
            <div class="mood-Record5"
                 @mouseenter="isHovering = true"
                 @mouseleave="isHovering = false"
                 @click="page='profile'">
              <h1 style="position: relative;top: 9px;">æˆ‘çš„ç©ºé—´</h1>
              <img src="5.jpg" id="pic5" alt="æˆ‘çš„ç©ºé—´">
              <p>åœ¨è¿™é‡Œæ‚¨å¯ä»¥çœ‹åˆ°æ‚¨çš„å¿ƒæƒ…è®°å½•ä»¥åŠæ ‘æ´è®°å½•ï¼Œè¿‡å¾€å¿ƒç»ªæ¸…æ™°å­˜æ¡£ï¼Œå¸®ä½ å¾ªç€ç‚¹æ»´å°è®°ï¼Œç»­å†™å±äºè‡ªå·±çš„æƒ…ç»ªæ•…äº‹ã€‚</p>
              <h3 style="color: rgb(165, 45, 45);position: relative;top: -20px;">é‡Šæ€€è¿‡å»çš„ä¸å¼€å¿ƒï¼Œç†è§£å½“ä¸‹çš„è‡ªå·±</h3>
            </div>
          </div>
        </div>
        <!-- å¿ƒæƒ…ä¾¿ç­¾ -->
        <div v-if="page==='diary'" key="diary" class="moodDiary">
          <div class="cover"></div>
          <div class="content">
            <h2>å¿ƒæƒ…ä¾¿ç­¾</h2>
            <button id="btn1" @click="recieve">æäº¤</button>
            <div class="emoji-wrap">
              <div v-for="(emj,index) in emoji.slice(0,35)" 
                   :key="index" 
                   class="E-emoji" 
                   @click="selectEmj(emj)"
                   :class="{'selected':selectedEmj===emj}"
                   :title="`ç‚¹å‡»é€‰æ‹©${emj}`">
                {{emj}}
              </div>
            </div>
            <textarea v-model="inputValue" 
                      type="text" 
                      class="talk" 
                      placeholder="è¯·å…ˆç‚¹å‡»æ‚¨å½“ä¸‹çš„çŠ¶æ€ï¼Œå¦‚æœå¯ä»¥ç”¨æ–‡å­—è®°å½•ä¸‹å§ï¼"></textarea>
          </div>
        </div>
        <!-- MBTIæµ‹è¯• -->
<div v-if="page==='mbti'" key="mbti" class="moodMbti">
  <div v-for="(question, index) in questions" :key="index">
    <p><strong>{{ question.q }}</strong></p>
    <div class="BtnYN">
      <button 
        class="btn_A" 
        :class="{ selected: userAnswers[index] === 0 }"
        @click="selectAnswer(index, 0)"
      >
        {{ question.opts[0] }}
      </button>
      <button 
        class="btn_B" 
        :class="{ selected: userAnswers[index] === 1 }"
        @click="selectAnswer(index, 1)"
      >
        {{ question.opts[1] }}
      </button>
    </div>
  </div>
  <button class="mbti-submit" @click="submitMBTI">æäº¤</button>
  <!-- æ˜¾ç¤ºç»“æœ -->
  <div v-if="mbtiResult" class="mbti-result">
    <h2>ä½ çš„ MBTI äººæ ¼ç±»å‹æ˜¯ï¼š<span>{{ mbtiResult }}</span></h2>
    <p>è¿™ä»£è¡¨ä½ æ˜¯ä¸€ä¸ª {{ getMBTIDescription(mbtiResult) }}ã€‚</p>
  </div>
</div>
<!-- æ˜Ÿåº§è§£æé¡µé¢ -->
<div v-if="page==='horoscope'" key="horoscope" class="moodHoroscope">
  <h2>âœ¨ æ˜Ÿåº§æ·±åº¦è§£æ</h2>
  <p class="subtitle">äº†è§£ä½ çš„æ˜Ÿåº§ç‰¹è´¨ï¼Œå‘ç°æ½œåœ¨ä¼˜åŠ¿ä¸æˆé•¿æ–¹å‘</p>

  <!-- æ˜Ÿåº§é€‰æ‹©å®«æ ¼ -->
  <div class="sign-grid">
    <button
      v-for="sign in zodiacSigns"
      :key="sign"
      @click="selectSign(sign)"
      :class="{ active: selectedSign === sign }"
      class="sign-card"
    >
      <span class="sign-name">{{ sign }}</span>
      <span class="sign-date">{{ signDates[sign] }}</span>
    </button>
  </div>

  <!-- æ˜Ÿåº§è§£æç»“æœ -->
  <transition name="slide-fade">
    <div v-if="selectedSign" class="horoscope-result">
      <!-- æ˜Ÿåº§å¤´éƒ¨ä¿¡æ¯ -->
      <div class="result-header">
        <h3>{{ selectedSign }} Â· {{ currentHoroscope.keyword }}</h3>
        <div class="sign-meta">
          <span class="meta-item">ğŸ“… {{ currentHoroscope.dateRange }}</span>
          <span class="meta-item">ğŸŒ± {{ currentHoroscope.element }}</span>
          <span class="meta-item">ğŸª {{ currentHoroscope.rulingPlanet }}</span>
        </div>
        <div class="divider"></div>
      </div>

      <!-- è¯¦ç»†è§£æ -->
      <div class="result-content">
        <!-- æ€§æ ¼ç‰¹ç‚¹ -->
        <div class="info-section">
          <h4 class="section-title">ğŸ§  æ€§æ ¼è§£æ</h4>
          <div class="section-content">
            <p><strong>æ ¸å¿ƒç‰¹è´¨ï¼š</strong>{{ currentHoroscope.personality.detail }}</p>
            <div class="traits-grid">
              <div class="trait-box positive">
                <span class="trait-label">ä¼˜åŠ¿</span>
                <p>{{ currentHoroscope.personality.strengths }}</p>
              </div>
              <div class="trait-box negative">
                <span class="trait-label">éœ€æ³¨æ„</span>
                <p>{{ currentHoroscope.personality.weaknesses }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- çˆ±æƒ…è§‚ -->
        <div class="info-section">
          <h4 class="section-title">ğŸ’– çˆ±æƒ…è§‚</h4>
          <div class="section-content">
            <p><strong>æ‹çˆ±é£æ ¼ï¼š</strong>{{ currentHoroscope.love.style }}</p>
            <p><strong>æœ€ä½³é…å¯¹ï¼š</strong>{{ currentHoroscope.love.compatibility }}</p>
            <p><strong>å…³ç³»å»ºè®®ï¼š</strong>{{ currentHoroscope.love.advice }}</p>
          </div>
        </div>

        <!-- äº‹ä¸šè¿ -->
        <div class="info-section">
          <h4 class="section-title">ğŸ’¼ äº‹ä¸šæ–¹å‘</h4>
          <div class="section-content">
            <p><strong>é€‚åˆé¢†åŸŸï¼š</strong>{{ currentHoroscope.career.aptitudes }}</p>
            <p><strong>èŒåœºå»ºè®®ï¼š</strong>{{ currentHoroscope.career.advice }}</p>
          </div>
        </div>

        <!-- å¥åº·è´´å£« -->
        <div class="info-section">
          <h4 class="section-title">ğŸ¥ å¥åº·è´´å£«</h4>
          <div class="section-content">
            <p><strong>éœ€å…³æ³¨ï¼š</strong>{{ currentHoroscope.health.focus }}</p>
            <p><strong>å…»æŠ¤å»ºè®®ï¼š</strong>{{ currentHoroscope.health.tips }}</p>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨åè¨€ -->
      <div class="sign-quote">
        <p>"{{ getSignQuote(selectedSign) }}"</p>
      </div>
    </div>
  </transition>

  <!-- åº•éƒ¨æé†’ -->
  <div class="disclaimer">
    <p>ğŸŒŸ æ˜Ÿåº§æ˜¯äº†è§£è‡ªæˆ‘çš„ä¸€ç§è§†è§’ï¼ŒçœŸæ­£çš„æˆé•¿æ¥è‡ªä½ çš„é€‰æ‹©å’Œè¡ŒåŠ¨ã€‚</p>
  </div>
</div>
<!-- æ ‘æ´é¡µé¢ -->
<div v-if="page==='treehole'" key="treehole" class="treehole-page">
  <div class="treehole-container">
    
    <!-- å·¦ä¾§ï¼šTAçš„å¿ƒäº‹ -->
    <div class="public-confessions-panel">
      <div class="panel-header">
        <h3>ğŸ’Œ TAçš„å¿ƒäº‹</h3>
        <p class="panel-subtitle">çœ‹çœ‹å¤§å®¶éƒ½åœ¨æƒ³äº›ä»€ä¹ˆ</p>
      </div>
      
      <!-- å¿ƒäº‹åˆ—è¡¨ -->
      <div class="confessions-list" v-if="publicConfessions.length > 0">
        <div v-for="(confession, index) in publicConfessions" 
     :key="confession.id || index" 
     class="confession-card"
     @click="openConfessionDetail(confession)">
          <div class="card-header">
            <span class="card-emoji">{{ confession.emoji || 'ğŸ’­' }}</span>
            <span class="card-time">{{ formatRelativeTime(confession.time) }}</span>
          </div>
          <div class="card-content">
            {{ confession.message.length > 60 ? confession.message.substring(0, 60) + '...' : confession.message }}
          </div>
          <div class="card-footer">
            <span class="likes-count">â¤ï¸ {{ confession.likes || 0 }}</span>
            <span class="comments-count">ğŸ’¬ {{ getCommentCount(confession) }}</span>
          </div>
        </div>
      </div>
      
      <!-- ç©ºçŠ¶æ€ -->
      <div v-else class="empty-state">
        <div class="empty-icon">ğŸŒ™</div>
        <p>è¿˜æ²¡æœ‰å…¬å¼€çš„å¿ƒäº‹</p>
        <p class="empty-hint">å†™ä¸‹ç¬¬ä¸€æ¡å¿ƒäº‹å§ï½</p>
      </div>
    </div>
    
    <!-- å³ä¾§ï¼šæˆ‘çš„æ ‘æ´ -->
    <div class="my-treehole-panel">
      <div class="panel-header">
        <h2>ğŸŒ³ æˆ‘çš„æ ‘æ´</h2>
        <p class="panel-subtitle">æŠŠå¿ƒé‡Œè¯è¯´ç»™æ ‘æ´å¬</p>
      </div>
      
      <!-- ä¹¦å†™åŒºåŸŸ -->
      <div class="writing-area" v-if="!submitted">
        <textarea
          v-model="treeholeMessage"
          placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„ç§˜å¯†ã€çƒ¦æ¼ã€å§”å±ˆæˆ–å°ç¡®å¹¸â€¦â€¦"
          maxlength="300"
          rows="6"
          class="message-input"
        ></textarea>
        <div class="char-counter">
          <span>{{ treeholeMessage.length }}/300</span>
        </div>
        
        <!-- å…¬å¼€é€‰é¡¹ -->
        <div class="public-option">
          <label class="option-label">
            <input type="checkbox" v-model="isPublic">
            <span class="custom-checkbox"></span>
            <span class="option-text">åŒ¿åå…¬å¼€åˆ°"TAçš„å¿ƒäº‹"</span>
          </label>
        </div>
        
        <!-- æäº¤æŒ‰é’® -->
        <div class="submit-actions">
          <button @click="clearMessage" 
                  class="clear-btn"
                  :disabled="!treeholeMessage.trim()">
            æ¸…ç©º
          </button>
          <button @click="submitConfession" 
                  class="submit-btn"
                  :disabled="!treeholeMessage.trim() || submitting">
            <span v-if="!submitting">ğŸŒ™ æŠ•å…¥æ ‘æ´</span>
            <span v-else>æäº¤ä¸­...</span>
          </button>
        </div>
      </div>
      
      <!-- å›å¤åŒºåŸŸ -->
      <div v-else class="reply-area">
        <div class="reply-header">
          <div class="envelope-icon">ğŸ’Œ</div>
          <h3>æ ‘æ´æ”¶åˆ°äº†ä½ çš„å¿ƒäº‹</h3>
        </div>
        
        <div class="reply-content">
          <div class="your-message">
            <h4>ä½ çš„å¿ƒäº‹ï¼š</h4>
            <p>{{ lastConfessionMessage }}</p>
          </div>
          
          <div class="treehole-reply">
            <h4>ğŸŒ³ æ ‘æ´å›ä¿¡ï¼š</h4>
            <p>{{ treeholeReply }}</p>
          </div>
          
          <div class="public-notice" v-if="lastConfessionPublic">
            âœ¨ ä½ çš„å¿ƒäº‹å·²åŒ¿ååˆ†äº«åˆ°"TAçš„å¿ƒäº‹"
          </div>
        </div>
        
        <div class="reply-actions">
          <button @click="writeAnother" class="again-btn">
            âœï¸ å†å†™ä¸€å°
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- å¿ƒäº‹è¯¦æƒ…å¼¹çª— -->
  <div v-if="showConfessionDetail" class="confession-modal">
    <div class="modal-overlay" @click="closeConfessionDetail"></div>
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-emoji">{{ currentDetail.emoji || 'ğŸ’­' }}</div>
        <div class="modal-time">{{ formatFullTime(currentDetail.time) }}</div>
        <button @click="closeConfessionDetail" class="close-btn">Ã—</button>
      </div>
      
      <div class="modal-body">
        <div class="confession-detail">
          <p>{{ currentDetail.message }}</p>
        </div>
        
        <div class="reply-detail">
          <h4>ğŸŒ³ æ ‘æ´å›ä¿¡ï¼š</h4>
          <p>{{ currentDetail.reply }}</p>
        </div>
        
        <!-- äº’åŠ¨åŒºåŸŸ -->
        <div class="interaction-area">
          <div class="interaction-stats">
            <button @click="likeConfession(currentDetail)" class="like-btn">
              â¤ï¸ {{ currentDetail.likes || 0 }}
            </button>
            <span class="comment-count">ğŸ’¬ {{ getCommentCount(currentDetail) }}</span>
          </div>
          
          <!-- è¯„è®ºåŒºåŸŸ -->
          <div class="comments-section" v-if="currentDetail">
            <h4>ğŸ’¬ è¯„è®ºï¼ˆ{{ getCommentCount(currentDetail) }}ï¼‰</h4>
            
            <!-- è¯„è®ºåˆ—è¡¨ -->
            <div class="comments-list" v-if="getCommentCount(currentDetail) > 0">
              <div v-for="(comment, index) in currentDetail.comments" 
                   :key="index" 
                   class="comment-item">
                <div class="comment-header">
                  <span class="comment-author">åŒ¿åç”¨æˆ· {{ index + 1 }}</span>
                  <span class="comment-time">{{ formatRelativeTime(comment.time) }}</span>
                </div>
                <div class="comment-content">{{ comment.text }}</div>
              </div>
            </div>
            
            <div v-else class="no-comments">
              è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥ç¬¬ä¸€æ¡è¯„è®ºå§ï½
            </div>
            
            <!-- å‘è¡¨è¯„è®º -->
            <div class="comment-input-area">
              <textarea 
                v-model="newCommentText" 
                placeholder="å†™ä¸‹ä½ çš„è¯„è®º...ï¼ˆåŒ¿åï¼‰"
                maxlength="200"
                rows="3"
                class="comment-input"
              ></textarea>
              <div class="comment-input-footer">
                <span class="char-count">{{ newCommentText.length }}/200</span>
                <button @click="submitComment(currentDetail)" 
                        class="comment-submit-btn"
                        :disabled="!newCommentText.trim()">
                  å‘è¡¨è¯„è®º
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
 <!-- æˆ‘çš„ç©ºé—´ -->
<div v-if="page === 'profile'" key="profile" class="profile-page">
  <!-- èƒŒæ™¯è£…é¥° -->
  <div class="bg-decoration"></div>

  <!-- ä¸»å®¹å™¨ -->
  <div class="profile-container">

    <!-- æœªç™»å½•çŠ¶æ€ -->
    <div v-if="!currentUser" class="guest-welcome">
      <h2>âœ¨ æ¬¢è¿æ¥åˆ°ä½ çš„å¿ƒçµå°å±‹</h2>
      <p>åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è®°å½•æƒ…ç»ªã€äº†è§£è‡ªå·±ã€å€¾è¯‰å¿ƒäº‹</p>
      <div class="auth-actions">
        <button @click="openLogin" class="btn-login">å·²æœ‰è´¦å·ï¼Ÿç™»å½•</button>
        <button @click="openRegister" class="btn-register">æ³¨å†Œæ–°ç”¨æˆ·</button>
      </div>
    </div>

    <!-- å·²ç™»å½•çŠ¶æ€ -->
    <div v-else class="user-profile">

      <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
      <div class="profile-header">
  <div class="avatar">
  <img v-if="currentUser.avatar && currentUser.avatar.startsWith('data:')"
       :src="currentUser.avatar" />
  <span v-else>{{ currentUser.avatar || 'ğŸ‘¤' }}</span>
</div>
        <div class="info">
          <h1>{{currentUser.username }}</h1>
          <p class="meta">
            {{ currentUser.gender }} Â· {{ currentUser.zodiac }} Â· 
            <span :title="getMBTIDescription(currentUser.mbti)">{{ currentUser.mbti || 'æœªæµ‹è¯•' }}</span>
          </p>
        </div>
      </div>

      <!-- æ•°æ®æ¦‚è§ˆå¡ç‰‡ -->
      <div class="stats-grid">
        <div class="stat-card mood">
          <h3>å¿ƒæƒ…æ—¥è®°</h3>
          <p><strong>{{ moodRecords.length }}</strong> æ¡è®°å½•</p>
          <small>æœ€è¿‘ä¸€æ¬¡ï¼š{{ formattedRecords[0]?.date || 'æš‚æ— ' }}</small>
        </div>
        <div class="stat-card treehole">
          <h3>æ ‘æ´ç§è¯­</h3>
          <p><strong>{{ treeholeHistory.length }}</strong> æ¬¡å€¾è¯‰</p>
        </div>
        <div class="stat-card mbti" v-if="currentUser.mbti">
          <h3>ä½ çš„æ€§æ ¼</h3>
          <p><strong>{{ currentUser.mbti }}</strong></p>
          <small>{{ getMBTIDescription(currentUser.mbti) }}</small>
        </div>
        
      </div>

      <!-- æœ€è¿‘å¿ƒæƒ…è®°å½• -->
      <div class="section recent-mood">
        <h2>ğŸ“ è¿‘æœŸå¿ƒæƒ…ä¾¿ç­¾</h2>
        <div v-if="formattedRecords.length === 0" class="empty">
          ğŸ«§ å°šæœªè®°å½•ä»»ä½•å¿ƒæƒ…ï¼Œå»ä¸»é¡µè¯•è¯•å§ï½
        </div>
       <div v-else class="records-list">
  <div
    v-for="(r, i) in formattedRecords.slice(0, 6)"
    :key="i"
    class="record-item"
  >
    <!-- æ‘˜è¦æ  -->
    <div class="record-summary" @click="toggleMood(i)">
      <span class="emoji">{{ r.emoji }}</span>
      <span class="text-preview">{{ r.text.slice(0, 18) }}{{ r.text.length > 18 ? 'â€¦' : '' }}</span>
      <span class="expand-btn">{{ expandedMood.has(i) ? 'æ”¶èµ·' : 'å±•å¼€' }}</span>
    </div>

    <!-- å±•å¼€åŒº -->
    <transition name="slide-fade">
      <div v-if="expandedMood.has(i)" class="record-detail">
        <div class="text-full">{{ r.text }}</div>
        <div class="time-row">
          <span class="time">{{ r.date }}</span>
          <button class="del-btn" @click.stop="delMood(i)">åˆ é™¤</button>
        </div>
      </div>
    </transition>
  </div>
</div>
      </div>

      <!-- æ ‘æ´å†å² -->
      <div class="section treehole-history">
        <h2>ğŸŒ™ æ ‘æ´è¯´è¿‡çš„è¯</h2>
        <div v-if="formattedTreeholeHistory.length === 0" class="empty">
          ğŸ•³ï¸ è¿˜æ²¡å‘æ ‘æ´è¯´è¿‡æ‚„æ‚„è¯å‘¢
        </div>
<div v-else class="treehole-list">
  <div
    v-for="(t, i) in formattedTreeholeHistory"
    :key="i"
    class="treehole-item"
  >
    <!-- æ€»æ ‡é¢˜æ ï¼šç‚¹å‡»å±•å¼€/æ”¶èµ· -->
    <div class="treehole-summary" @click="toggleTreehole(i)">
      <span class="time">{{ t.date }}</span>
      <span class="expand-btn">{{ expandedTH.has(i) ? 'æ”¶èµ·' : 'å±•å¼€' }}</span>
    </div>

    <!-- å±•å¼€åŒº -->
    <transition name="slide-fade">
      <div v-if="expandedTH.has(i)" class="treehole-detail">
        <blockquote>ã€Œ{{ t.message }}ã€</blockquote>
        <p class="reply">æ ‘æ´å›ä¿¡ï¼š{{ t.reply }}</p>
        <button class="del-btn" @click.stop="delTreehole(t.id)">åˆ é™¤</button>
      </div>
    </transition>
  </div>
</div>
      </div>

      <!-- åº•éƒ¨æ“ä½œæ  -->
      <div class="action-footer">
        <button @click="logout" class="btn-logout">é€€å‡ºç™»å½•</button>
      </div>

    </div>
  </div>

  <!-- ç™»å½•å¼¹çª—ï¼ˆä¿æŒä¸å˜ï¼‰ -->
  <div v-if="showLoginModal" class="modal-backdrop" @click="closeModals()">
    <div class="modal" @click.stop>
      <h3>ğŸ” ç™»å½•è´¦æˆ·</h3>
      <div class="form-group">
        <label>ç”¨æˆ·å</label>
        <input v-model="loginForm.username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
      </div>
      <div class="form-group">
        <label>å¯†ç </label>
        <input type="password" v-model="loginForm.password" placeholder="è¯·è¾“å…¥å¯†ç ">
      </div>
      <div class="modal-footer">
        <button @click="closeModals()" class="btn-cancel">å–æ¶ˆ</button>
        <button @click="doLogin" class="btn-confirm">ç™»å½•</button>
      </div>
      <p class="switch-link">
        æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" @click.prevent="openRegister">ç«‹å³æ³¨å†Œ</a>
      </p>
    </div>
  </div>

  <!-- æ³¨å†Œå¼¹çª— -->
  <div v-if="showRegisterModal" class="modal-backdrop" @click="closeModals()">
    <div class="modal" @click.stop>
      <h3>ğŸŒŸ åˆ›å»ºæ–°è´¦æˆ·</h3>
      <div class="form-group">
        <label>å¤´åƒ</label>
        <input type="file" accept="image/*" @change="pickAvatar">
        <div class="avatar-preview" v-if="registerForm.avatar">
    <img :src="registerForm.avatar" class="pic_T" />
  </div>
</div>
      <div class="form-group">
        <label>ç”¨æˆ·å *</label>
        <input v-model="registerForm.username" placeholder="ç”¨äºç™»å½•">
      </div>
      <div class="form-group">
        <label>å¯†ç  *</label>
        <input type="password" v-model="registerForm.password" placeholder="è‡³å°‘6ä½">
      </div>
      <div class="form-group">
        <label>æ€§åˆ«</label>
        <select v-model="registerForm.gender">
          <option>ç”·</option>
          <option>å¥³</option>
          <option>å…¶ä»–</option>
        </select>
      </div>
      <div class="form-group">
        <label>æ˜Ÿåº§</label>
        <select v-model="registerForm.zodiac">
          <option v-for="sign in zodiacSigns" :value="sign">{{ sign }}</option>
        </select>
      </div>
      <div class="modal-footer">
        <button @click="closeModals()" class="btn-cancel">å–æ¶ˆ</button>
        <button @click="doRegister" class="btn-confirm">æ³¨å†Œ</button>
      </div>
    </div>
  </div>
</div>

    </transition>
  </div>
  <script src="emotion.js"></script>
</body>
</html>